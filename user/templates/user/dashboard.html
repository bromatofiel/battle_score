{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Tableau de Bord" %}{% endblock %}

{% block content %}
<div class="pb-12 px-6">
    <div>
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12">
            <div>
                <h1 class="text-4xl font-bold text-white mb-2">{% trans "Tableau de Bord" %}</h1>
                <p class="text-slate-400">{% trans "Gérez vos tournois et suivez vos participations." %}</p>
            </div>
            <div class="flex gap-4">
                <a href="{% url 'tournament_create' %}" class="px-6 py-3 rounded-xl btn-primary text-sm font-semibold text-white shadow-lg shadow-blue-500/20">
                    {% trans "Créer un Tournoi" %}
                </a>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-12">
            <!-- Managed Tournaments -->
            <div class="space-y-6">
                <h2 class="text-xl font-semibold text-white flex items-center gap-3">
                    <span class="w-2 h-8 rounded-full bg-blue-500"></span>
                    {% trans "Mes Tournois (Admin)" %}
                </h2>
                <div class="space-y-4">
                    {% for tournament in managed_tournaments %}
                        <div class="glass p-6 rounded-2xl border-white/5 hover:border-blue-500/30 transition-all group">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-lg font-bold text-white group-hover:text-blue-400 transition-colors">{{ tournament.name }}</h3>
                                    <p class="text-sm text-slate-500 mt-1">
                                        {{ tournament.location|default:"Lieu non défini" }} • {{ tournament.datetime|date:"d/m/Y"|default:"Date non définie" }}
                                    </p>
                                </div>
                                <span class="px-3 py-1 rounded-full bg-blue-500/10 text-blue-400 text-[10px] font-bold uppercase tracking-wider">
                                    {{ tournament.nb_teams }} {% trans "Équipes" %}
                                </span>
                            </div>
                            <div class="mt-6 flex justify-end gap-3">
                                <a href="#" class="text-xs font-semibold text-slate-400 hover:text-white transition-colors">{% trans "Gérer" %}</a>
                            </div>
                        </div>
                    {% empty %}
                        <div class="glass p-8 rounded-2xl border-dashed border-white/10 text-center">
                            <p class="text-slate-500 text-sm">{% trans "Vous n'avez pas encore créé de tournoi." %}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Participations -->
            <div class="space-y-6">
                <h2 class="text-xl font-semibold text-white flex items-center gap-3">
                    <span class="w-2 h-8 rounded-full bg-purple-500"></span>
                    {% trans "Mes Participations" %}
                </h2>
                <div class="space-y-4">
                    {% for participation in participations %}
                        <div class="glass p-6 rounded-2xl border-white/5 hover:border-purple-500/30 transition-all group">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-lg font-bold text-white group-hover:text-purple-400 transition-colors">{{ participation.tournament.name }}</h3>
                                    <p class="text-sm text-slate-500 mt-1">
                                        {% trans "Rôle" %} : {{ participation.get_role_display }} • {% trans "Équipe" %} : {{ participation.team.name|default:"Non assigné" }}
                                    </p>
                                </div>
                                <span class="px-3 py-1 rounded-full bg-purple-500/10 text-purple-400 text-[10px] font-bold uppercase tracking-wider">
                                    {% trans "Participant" %}
                                </span>
                            </div>
                            <div class="mt-6 flex justify-end gap-3">
                                <a href="#" class="text-xs font-semibold text-slate-400 hover:text-white transition-colors">{% trans "Voir Score" %}</a>
                            </div>
                        </div>
                    {% empty %}
                        <div class="glass p-8 rounded-2xl border-dashed border-white/10 text-center">
                            <p class="text-slate-500 text-sm">{% trans "Vous ne participez à aucun tournoi pour le moment." %}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
