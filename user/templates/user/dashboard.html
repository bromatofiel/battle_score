{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Tableau de Bord" %}{% endblock %}

{% block content %}
<div class="pb-12 px-6">
    <div>
        <div class="mb-12">
            <h1 class="text-4xl font-bold text-white mb-2">{% trans "Tableau de Bord" %}</h1>
            <p class="text-slate-400">{% trans "Gérez vos tournois et suivez vos participations." %}</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-12">
            <!-- Managed Tournaments -->
            <div class="space-y-6">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-white flex items-center gap-3">
                        <span class="w-2 h-8 rounded-full bg-blue-500"></span>
                        {% trans "Mes Tournois (Admin)" %}
                    </h2>
                    <a href="{% url 'tournament:create' %}" class="px-4 py-2 rounded-xl btn-primary text-xs font-bold text-white shadow-lg shadow-blue-500/20 flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg>
                        <span class="hidden sm:inline">{% trans "Créer un Tournoi" %}</span>
                    </a>
                </div>
                <div class="space-y-4">
                    {% for tournament in managed_tournaments %}
                        <a href="{% url 'tournament:teams' tournament.id %}" class="block glass p-6 rounded-2xl border-white/5 hover:border-blue-500/30 transition-all group relative overflow-hidden">
                            <div class="absolute inset-0 bg-blue-500/0 group-hover:bg-blue-500/[0.02] transition-colors"></div>
                            <div class="relative z-10">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-lg font-bold text-white group-hover:text-blue-400 transition-colors">{{ tournament.name }}</h3>
                                        <p class="text-sm text-slate-500 mt-1">
                                            {{ tournament.location|default:"Lieu non défini" }} • {{ tournament.date_start|date:"d/m/Y"|default:"Date non définie" }}
                                        </p>
                                    </div>
                                    <span class="px-3 py-1 rounded-full bg-blue-500/10 text-blue-400 text-[10px] font-bold uppercase tracking-wider">
                                        {{ tournament.nb_teams }} {% trans "Équipes" %}
                                    </span>
                                </div>
                                <div class="mt-6 flex justify-end">
                                    <span class="text-xs font-semibold text-slate-400 group-hover:text-white transition-colors flex items-center gap-1">
                                        {% trans "Gérer" %}
                                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                    </span>
                                </div>
                            </div>
                        </a>
                    {% empty %}
                        <div class="glass p-8 rounded-2xl border-dashed border-white/10 text-center">
                            <p class="text-slate-500 text-sm">{% trans "Vous n'avez pas encore créé de tournoi." %}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Participations -->
            <div class="space-y-6">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-semibold text-white flex items-center gap-3">
                        <span class="w-2 h-8 rounded-full bg-purple-500"></span>
                        {% trans "Mes Participations" %}
                    </h2>
                    <a href="#" class="px-4 py-2 rounded-xl btn-primary text-xs font-bold text-white shadow-lg shadow-blue-500/20 flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                        <span class="hidden sm:inline">{% trans "Rechercher" %}</span>
                    </a>
                </div>
                <div class="space-y-4">
                    {% for participation in participations %}
                        <a href="{% url 'tournament:teams' participation.tournament.id %}" class="block glass p-6 rounded-2xl border-white/5 hover:border-purple-500/30 transition-all group relative overflow-hidden">
                            <div class="absolute inset-0 bg-purple-500/0 group-hover:bg-purple-500/[0.02] transition-colors"></div>
                            <div class="relative z-10">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="text-lg font-bold text-white group-hover:text-purple-400 transition-colors">{{ participation.tournament.name }}</h3>
                                        <p class="text-sm text-slate-500 mt-1">
                                            {% trans "Rôle" %} : {{ participation.get_role_display }} • {% trans "Équipe" %} : {{ participation.team.name|default:"Non assigné" }}
                                        </p>
                                    </div>
                                    <span class="px-3 py-1 rounded-full bg-purple-500/10 text-purple-400 text-[10px] font-bold uppercase tracking-wider">
                                        {% trans "Participant" %}
                                    </span>
                                </div>
                                <div class="mt-6 flex justify-end">
                                    <span class="text-xs font-semibold text-slate-400 group-hover:text-white transition-colors flex items-center gap-1">
                                        {% trans "Voir Score" %}
                                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                    </span>
                                </div>
                            </div>
                        </a>
                    {% empty %}
                        <div class="glass p-8 rounded-2xl border-dashed border-white/10 text-center">
                            <p class="text-slate-500 text-sm">{% trans "Vous ne participez à aucun tournoi pour le moment." %}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
